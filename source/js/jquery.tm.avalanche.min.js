/**
*	Avalanche Slider
*	Version: 1.10
*	URL: @ThemeMountain
*	Description: Content Slider
*	Requires: jQuery 1.10+
*	Author: ThemeMountain
*	Copyright: Copyright 2013 ThemeMountain
*	License: Attribution-NonCommercial 3.0 (http://creativecommons.org/licenses/by-nc/3.0/)
*/
!function(a,e,t,i){"use strict";function s(e){e.find(".tms-caption").each(function(){var e=a(this),t=(e.data("animate-in")+"").split(";");e.addClass(e.is("[data-no-scale]")?"no-scale":"scale"),a.each(t,function(a,t){t=t.split(":");var i=t[0],s=t[1];"opacity"===i&&e.data("o",s),"scale"===i&&e.data("s",s),"easing"===i&&e.data("e",s),"transX"===i&&e.data("tx",parseFloat(s)),"transY"===i&&e.data("ty",parseFloat(s)),"transZ"===i&&e.data("tz",parseFloat(s)),"rotateX"===i&&e.data("rx",parseFloat(s)),"rotateY"===i&&e.data("ry",parseFloat(s)),"rotateZ"===i&&e.data("rz",parseFloat(s)),"duration"===i&&e.data("du",parseFloat(s)),"delay"===i&&e.data("de",parseFloat(s))}),e.data("w",parseFloat(e.css("width"))),e.data("h",parseFloat(e.css("height"))),e.data("fs",parseFloat(e.css("font-size"))),e.data("lh",parseFloat(e.css("line-height"))),e.data("pt",parseFloat(e.css("padding-top"))),e.data("pr",parseFloat(e.css("padding-right"))),e.data("pb",parseFloat(e.css("padding-bottom"))),e.data("pl",parseFloat(e.css("padding-left"))),e.data("mt",parseFloat(e.css("margin-top"))),e.data("mr",parseFloat(e.css("margin-right"))),e.data("mb",parseFloat(e.css("margin-bottom"))),e.data("ml",parseFloat(e.css("margin-left"))),e.data("bt",parseFloat(e.css("border-top-width"))),e.data("br",parseFloat(e.css("border-right-width"))),e.data("bb",parseFloat(e.css("border-bottom-width"))),e.data("bl",parseFloat(e.css("border-left-width")))})}function n(e,i,s){var n=e.find(".tms-slide"),o=0;n.each(function(){{var n=a(this),d=n.find("img").length,l=n.find("iframe, video").length;n.children(".tms-caption").length}w(n,i);var c=a('<div class="tm-loader"><div id="circle" /></div>');if(d>0&&(i.lazyLoad?c.appendTo(n):e.find(c).length||c.appendTo(e)),l){E&&n.is("[data-video-bkg]")&&n.children("video").css({display:"none"});var u=n.find("iframe, video");T(u,i),g(n,i),m(e,i)}d?n.find("img").each(function(e,l){l=a(this).data("src");var c=l.substr(l.lastIndexOf("."));if((t.isRetinaDevice()&&i.retinaSupport||t.isRetinaDevice()&&a(this).is("[data-retina]"))&&(!E&&!i.retinaSupportMobile||E&&i.retinaSupportMobile)&&(l.match(/\.(svg)/i)||(l=a(this).data("src").replace(c,i.retinaSuffix+c))),n.data("overlay-bkg-color")&&!n.find(".tms-overlay").length)var u=n.data("overlay-bkg-color").replace("#",""),h=n.data("overlay-bkg-opacity")?n.data("overlay-bkg-opacity"):.5,p=parseInt(u.substring(0,2),16),f=parseInt(u.substring(2,4),16),v=parseInt(u.substring(4,6),16),m="rgba( "+p+","+f+","+v+","+h/1+" )",g=a('<div class="tms-overlay" />').css({backgroundColor:m,opacity:0}).appendTo(n);a(this).css({opacity:0}).attr("src",l).one("load",function(){a(this).data("loaded",!0).css({opacity:1}),n.find(g).css({opacity:1}),e++,e===d&&(o++,r(n,o,i,s))}).one("error",function(){console.log("Error src:"+l)})}):(o++,m(e,i),r(n,o,i,s))})}function r(a,e,t,i){var s=a.closest(".tm-slider-container"),n=s.find(".tms-slides"),r=s.find("li.active"),o=null,d=null;if(a.find(".no-transition").css({visibility:"visible"}),s.data("setup",!0),s.data("first-load",!1),0===s.height()&&!s.data("height")&&a.hasClass("active")){r.children("img").css({maxHeight:"none"});var l=r.children("img").height();s.data("refH",l),s.css({height:l+"px"}),r.children("img").css({maxHeight:"100%"})}if(g(a,t),m(s,t),t.carousel&&!t.lazyLoad&&(n.children().css({opacity:1}),n.css({opacity:0})),s.find("iframe, video").css({opacity:1}),e===n.children().length&&t.onLoadEnd&&t.onLoadEnd(),t.lazyLoad||e!==n.children().length?t.lazyLoad&&1===e&&(s.data("loaded",!0),t.autoAdvance&&i.initSlideshow()):(s.data("loaded",!0),t.autoAdvance&&i.initSlideshow()),t.lazyLoad){if(a.find(".tm-loader").length&&a.find(".tm-loader").remove(),(a.is(r)||t.carouselVisible>1)&&a.find(".tms-caption").show(),!a.hasClass("active"))return!1;A?(r.css({transition:"none",opacity:0}),clearTimeout(d),d=setTimeout(function(){r.css({transitionProperty:"opacity",transitionDuration:"700ms",opacity:1})},50)):a.animate({opacity:1}),clearTimeout(o),o=setTimeout(function(){p(r,t)},300)}else e===n.children().length&&(s.find(".tm-loader").length&&s.find(".tm-loader").remove(),r.find(".tms-caption").show(),t.carouselVisible>1&&s.find(".tms-caption").show(),A?t.carousel?n.css({transitionProperty:"opacity",transitionDuration:"700ms",opacity:1}):r.css({transitionProperty:"opacity",transitionDuration:"700ms",opacity:1}):t.carousel?n.animate({opacity:1}):r.animate({opacity:1}),clearTimeout(o),o=setTimeout(function(){p(r,t)},300),s.find(".tms-arrow-nav, .tms-pagination").css({display:"block"}))}var o=function(r,o){var c=a.extend({},a.fn.avalancheSlider.tmsOpts,o),p=a(r),b=this,y=c.fulscreen?a(t).width():c.fullwidth?c.scaleUnder:parseFloat(p.data("width")?p.data("width"):p.css("width")),x=c.fulscreen?a(t).height():parseFloat(p.data("height")?p.data("height"):p.css("height")),S=p.find(".tms-slides"),F=S.children("li:first-child").addClass("active"),T=[];if(S.children(".tms-slide").each(function(e){e++,a(this).attr("id","tms-slide-"+e),T.push(a(this).attr("id")),c.carousel||a(this).not(".active").css(A?{transition:"none",transform:"translate3d( 100%, 0, 0)"}:{left:"100%"}),(c.forceFit||a(this).is("[data-force-fit]"))&&a(this).addClass("tms-forcefit")}),c.lazyLoad||F.css({opacity:0}),c.scaleUnder=p.data("scale-under")?p.data("scale-under"):c.scaleUnder,c.scaleMinHeight=p.data("scale-min-height")?p.data("scale-min-height"):c.scaleMinHeight,c.animation=p.data("animation")?p.data("animation"):c.animation,c.easing=p.data("easing")?p.data("easing"):c.easing,c.speed=p.data("speed")?p.data("speed"):c.speed,c.carousel=p.data("carousel")?p.data("carousel"):c.carousel,c.carouselVisible=p.data("carousel-visible-slides")?p.data("carousel-visible-slides"):c.carouselVisible,c.showProgressBar=p.is('[data-progress-bar="false"]')?!1:c.showProgressBar,c.autoAdvance=p.is("[data-auto-advance]")?!0:c.autoAdvance,c.interval=p.data("auto-advance-interval")?p.data("auto-advance-interval"):c.interval,c.pauseOnHover=p.is("[pause-on-hover=false]")?!1:c.pauseOnHover,c.navArrows=p.is("[data-nav-arrows=false]")?!1:c.navArrows,c.navPagination=p.is("[data-nav-pagination=false]")?!1:c.navPagination,c.navShowOnHover=p.is("[data-nav-show-on-hover=false]")?!1:c.navShowOnHover,F.is("[data-nav-dark]")&&(p.addClass("tms-nav-dark"),p.is("[data-featured-slider]")&&a("header").addClass("nav-dark")),c.fullscreen&&(p.css({top:0,left:0}).addClass("tms-fullscreen"),c.carouselVisible=1,c.fsUseHeightOf=c.fsUseHeightOf||p.data("fs-use-height")?c.fsUseHeightOf&&!p.data("fs-use-height")?c.fsUseHeightOf:p.data("fs-use-height"):"",c.fsUseHeightOf=c.fsUseHeightOf?"parent"===c.fsUseHeightOf?p.parent():p.closest("."+c.fsUseHeightOf):""),c.parallax=p.is("[data-parallax]")?!0:c.parallax,c.parallaxSpeed=p.data("parallax-speed")?p.data("parallax-speed"):c.parallaxSpeed,c.parallaxScaleOut=p.is("[data-parallax-scale-out]")?!0:c.parallaxScaleOut,c.parallaxFadeOut=p.is("[data-parallax-fade-out]")?!0:c.parallaxFadeOut,c.captionScaling||p.addClass("tms-caption-no-scaling"),!c.carousel&&c.carouselVisible&&(c.carouselVisible=1),c.carouselVisible>1&&(c.animation="slide"),c.carousel&&p.addClass("tms-carousel"),c.carouselScaleHeight&&p.addClass("tms-scalable-height"),E&&(c.autoPlay=!1,c.useVideoAPI=!1),c.navShowOnHover&&p.addClass("show-on-hover"),c.navArrows&&S.children().length>1){var z=a('<a href="#" />').attr("id","tms-prev").addClass("tms-arrow-nav").appendTo(p),C=a('<a href="#" />').attr("id","tms-next").addClass("tms-arrow-nav").appendTo(p);z.each(function(){a(this).on("click",function(a){a.preventDefault(),c.autoAdvance&&p.data("loaded")&&b.resetSlideshow(),b.prevSlide()})}),C.each(function(){a(this).on("click",function(a){a.preventDefault(),c.autoAdvance&&p.data("loaded")&&b.resetSlideshow(),b.nextSlide()})}),c.lazyLoad&&p.find(".tms-arrow-nav").css({display:"block"})}if(c.navPagination&&S.children().length>1){for(var H=a("<div>").addClass("tms-pagination").appendTo(p),k=1;k<S.children().length+1;k++)p.find(H).append('<a href="#" id="tms-pagination-'+k+'" data-index="'+k+'" class="tms-bullet-nav" />');var P=p.find("bullets"===c.paginationType?".tms-bullet-nav":".tms-thumb-nav");P.each(function(){a(this).on("click",function(){return F=p.find("li.active"),a(this).hasClass("active")?!1:(c.autoAdvance&&p.data("loaded")&&b.resetSlideshow(),parseFloat(a(this).data("index"))>parseFloat(H.find(".active").data("index"))?b.slideTo(a(this).data("index"),"next"):b.slideTo(a(this).data("index"),"prev"),!1)})}),H.find(".tms-bullet-nav:first-child").addClass("active"),c.lazyLoad&&H.css({display:"block"})}if(c.navKeyboard&&S.children().length>1){var V=[];a(e).on("keydown",function(a){return V[a.keyCode]=!0,V[37]&&V[39]?!1:(V[37]?(c.autoAdvance&&p.data("loaded")&&b.resetSlideshow(),c.lazyLoad?b.prevSlide():p.data("loaded")&&b.prevSlide()):V[39]&&(c.autoAdvance&&p.data("loaded")&&b.resetSlideshow(),c.lazyLoad?b.nextSlide():p.data("loaded")&&b.nextSlide()),i)}).on("keyup",function(a){V[a.keyCode]=!1})}p.swipeIt({draggable:!1,onSwipeMove:function(){},onSwipeEnd:function(a){"left"===a?b.prevSlide():b.nextSlide()}}),a(t).on("resize",function(){p.data("first-load")&&(y=c.fulscreen?a(t).width():c.fullwidth?c.scaleUnder:parseFloat(p.data("width")?p.data("width"):p.css("width")),x=c.fulscreen?a(t).height():parseFloat(p.data("height")?p.data("height"):p.css("height")),p.data("refW",y).data("refH",x).data("carousel-height",x));var e=p.find("li.active, li.target");c.carousel&&c.carouselVisible>1?S.children(".tms-slide").each(function(){g(a(this),c)}):g(e,c),m(p,c),p.addClass("resizing"),O(function(){p.removeClass("resizing")},300,"resize")}),p.parent().hasClass("tm-slider-parallax-container")&&c.parallax?(a(t).on("scroll",function(){d(p,c)}),l(p,c)):!p.parent().hasClass("tm-slider-parallax-container")&&c.parallax&&console.log("Add the class tm-slider-parallax-container to slider parent"),p.data("setup",!1).data("loaded",!1).data("first-load",!0).data("transitioning",!1).data("refW",y).data("refH",x).data("carousel-height",x),s(p),m(p,c),c.onSetup&&c.onSetup();var I,B,D,L,U,W,R,Q=null,q=null;b.initSlideshow=function(){return I||S.children().length<2?!1:(c.autoAdvance=!0,!E&&c.pauseOnHover&&(S.on("mouseleave ",b.resumeSlideshow),S.on("mouseenter ",b.pauseSlideshow)),c.showProgressBar&&(R=a("<div>").addClass("tms-progress-bar").appendTo(p)),b.startSlideshow(),N(c.interval),B=(new Date).getTime(),U=c.interval,c.onSlideshowStart&&c.onSlideshowStart(),i)},b.startSlideshow=function(a){a=a?L:c.interval,I=setInterval(function(){a!==c.interval&&(clearInterval(I),a=c.interval,U=c.interval,b.startSlideshow()),B=(new Date).getTime(),i!==R&&R.css({transition:"none",width:"0px"}),N(c.interval),b.nextSlide()},a)},b.pauseSlideshow=function(){return W||!I?!1:(clearInterval(I),D=(new Date).getTime(),L=50>U-(D-B)?50:U-(D-B),U=0===U?c.interval:L,i!==R&&R.stop().css({width:R.width()+"px"}),W=!0,c.onSlideshowPause&&c.onSlideshowPause(),i)},b.resumeSlideshow=function(){return W?(clearInterval(I),p.data("ssPaused",!1),B=(new Date).getTime(),N(L),b.startSlideshow(L),W=!1,i):!1},b.resetSlideshow=function(){return I?(clearInterval(I),i!==R&&R.css({transition:"none",width:"0px"}),N(c.interval),B=(new Date).getTime(),L=c.interval,U=c.interval,b.startSlideshow(c.interval),i):!1},b.endSlideshow=function(){return I?(clearInterval(I),I="",W=!1,!E&&c.pauseOnHover&&(S.off("mouseleave ",b.resumeSlideshow),S.off("mouseenter ",b.pauseSlideshow)),i!==R&&R.remove(),c.onSlideshowEnd&&c.onSlideshowEnd(),i):!1};var N=function(a){return i===R?!1:(A?(clearTimeout(Q),Q=setTimeout(function(){R.css({transitionProperty:"width",width:"100%",transitionDuration:a+"ms",transitionTimingFunction:"ease"})},50)):R.stop(!0,!0).animate({width:"100%"},a),i)};b.nextSlide=function(){if(p.data("transitioning"))return!1;var e;F=p.find("li.active");var t=T[a.inArray(F.attr("id"),T)+1];if(e=a.inArray(t,T)+1===0?1:a.inArray(t,T)+1,c.carousel&&c.carouselVisible>1){var i=v(p,c);1!==i&&(e=e===S.children().length-(i-2)?1:a.inArray(t,T)+1)}this.slideTo(e,"next")},b.prevSlide=function(){if(p.data("transitioning"))return!1;var e;F=p.find("li.active");var t=T[a.inArray(F.attr("id"),T)-1];if(e=a.inArray(t,T)+1===0?S.children().length:a.inArray(t,T)+1,c.carousel&&c.carouselVisible>1){var i=v(p,c);e=e===S.children().length?S.children().length-(i-1):a.inArray(t,T)+1}this.slideTo(e,"prev")},b.slideTo=function(e,t){if(p.data("first-load",!1),t||(F=p.find("li.active")),p.data("transitioning")||e===a.inArray(F.attr("id"),T)+1)return!1;f(p,e);var i=p.width(),s="slide"===c.animation?i:0;s*=c.carousel?e-1:1;var n=p.find("#tms-slide-"+e);n.addClass("target").css({zIndex:2,opacity:0===s?0:1}),F.css({zIndex:1}),p.removeClass("tms-nav-dark"),a("header").removeClass("nav-dark"),n.is("[data-nav-dark]")&&(p.addClass("tms-nav-dark"),p.is("[data-featured-slider]")&&a("header").addClass("nav-dark")),w(n,c),(n.children("img").data("loaded")||!n.children("img").length)&&g(n,c),m(p,c,n),t||(t="next"),t=c.carousel?1:"next"===t?1:-1;var r=v(p,c);A?c.carousel?u(S,1,-(s/r)*t,0,0,0,0,0,1,c.speed,0,M[c.easing],c):(n.css({transition:"none",transform:"translate3d("+s*t+"px, 0, 0)"}),clearTimeout(q),q=setTimeout(function(){u(F,1,-s*t,0,0,0,0,0,1,c.speed,0,M[c.easing],c),u(n,1,0,0,0,0,0,0,1,c.speed,0,M[c.easing],c)},50)):c.carousel?(p.data("transitioning",!0),S.animate({opacity:1,left:-(s/r)*t+"px"},c.speed,c.easingFallback,function(){h(p,c)})):(p.data("transitioning",!0),n.css({left:i*t+"px",visibility:"visible"}).animate({opacity:1,left:"0px"},c.speed,c.easingFallback,function(){h(p,c)}),F.animate({left:-i*t+"px"},c.speed,c.easingFallback))},n(p,c,b)},d=function(e,i){var s=a(t);s.data("animating")||(s.data("animating",!0),t.requestAnimationFrame(function(){l(e,i),s.data("animating",!1)}))},l=function(e,i){var s=a(t),n=s.scrollTop(),r=(s.height(),e.parent().height()+e.parent().offset().top-n),o=n*i.parallaxSpeed,d=i.parallaxScaleOut?2-r/e.parent().height():1;d=1>d?1:d;var l=i.parallaxFadeOut?r/e.parent().height():1;!E&&A&&c(e.parent())&&e.css({transform:"translate3d( 0, "+-o+"px, 0) scale3d( "+d+","+d+", 1 )",opacity:l.toFixed(2)})},c=function(e){var i=a(t).scrollTop(),s=i+a(t).height(),n=e.offset().top,r=n+e.outerHeight();return s>=n&&r>=i},u=function(e,t,i,s,n,r,o,d,l,c,u,p,f){var v=e.closest(".tm-slider-container");(e.hasClass("active")||e.hasClass("target")||e.hasClass("tms-slides"))&&(v.data("transitioning",!0),f.onSlideBefore&&f.onSlideBefore());var m={};m.transform="translate3d("+i+"px, "+s+"px, "+n+"px)rotate3d( 1, 0, 0, "+r+"deg)rotate3d( 0, 1, 0, "+o+"deg)rotate3d( 0, 0, 1, "+d+"deg)scale3d("+l+", "+l+", "+l+")",m.transitionProperty=V+", opacity",m.transitionDuration=c+"ms",m.transitionDelay=u+"ms",m.transitionTimingFunction=p,m.visibility="visible",m.opacity=t,e.css(m).on(I,function(e){e.stopPropagation(),a(this).off(I),(a(this).hasClass("target")||a(this).hasClass("tms-slides"))&&h(v,f),a(this).hasClass("tms-caption")&&a(this).css({transition:""})})},h=function(a,e){a.data("transitioning",!1),e.onSlideAfter&&e.onSlideAfter();var t=a.find("li.active"),s=a.find("li.target");return y(t,"pause",e),1===e.carouselVisible&&t.find(".tms-caption").not(".no-transition").css({display:"none",visibility:"hidden"}),e.carousel||t.css({visibility:"hidden"}),t.removeClass("active"),s.removeClass("target").addClass("active"),t=s,y(t,"play",e),e.carouselVisible>1?!1:(p(t,e),i)},p=function(e,t){e.find(".tms-caption").not(".no-transition").show().each(function(){var e=a(this),i=a(this).data("du")?e.data("du"):t.speed,s=a(this).data("de")?e.data("de"):0,n=a(this).data("e")?M[e.data("e")]:M[t.easing],r=null;A?(clearTimeout(r),r=setTimeout(function(){u(e,1,0,0,0,0,0,0,1,i,s,n)},500)):(n=t.easingFallback,e.delay(s).css({visibility:"visible"}).animate({opacity:1},i,n))})},f=function(a,e){var t=a.find(".tms-pagination");t.find(".active").removeClass("active"),t.find("#tms-pagination-"+e).addClass("active")},v=function(e,i){var s;return s=a(t).width()<768||a(t).width()>959||i.carouselVisible<=3?a(t).width()<480||a(t).width()>767||i.carouselVisible<=2?a(t).width()>479?i.carouselVisible:1:2:3},m=function(e,t){if(!t.carousel)return!1;var i,s,n=e.find(".tms-slides"),r=e.find("li.active"),o=r.index(),d=e.find(".tms-pagination"),l=n.children().length,c=v(e,t),u=e.width()/c,h=0,p=null;n.css({overflow:"visible"}).children().each(function(e){t.carouselVisible=0===t.carouselVisible?1:t.carouselVisible,1===t.carouselVisible?(a(this).css(A?{width:u+"px",opacity:1,visibility:"visible",transform:"translate3d("+u*e+"px, 0, 0)"}:{width:u+"px",opacity:1,visibility:"visible",left:u*e+"px"}),e++):a(this).css({width:u+"px",opacity:1,visibility:"visible","float":"left",position:"relative"}),h=h>a(this).outerHeight()?h:a(this).outerHeight()}),2===c&&o>n.children().length-2?(i=n.children().length-1,s=!0):3===c&&o>n.children().length-3?(i=n.children().length-2,s=!0):o>n.children().length-c?(i=n.children().length-c+1,s=!0):(i=o,s=!1),d.children().hide().slice(0,n.children().length-c+1).show(),s&&(r.removeClass("active"),n.find("li:nth-child("+i+")").addClass("active"),f(e,i)),A?(e.data("transitioning")||n.css({width:u*l+"px",transition:"none",transform:"translate3d("+-(u*i)+"px, 0, 0)"}),clearTimeout(p),p=setTimeout(function(){n.css({transitionProperty:"opacity, "+V,transitionDuration:t.speed+"ms"})},50)):n.css({width:u*l+"px",left:-(u*i)+"px"})},g=function(e,i){var s=e.closest(".tm-slider-container, .featured-media"),n=s.parent().width(),r=i.fsUseHeightOf?i.fsUseHeightOf.height():a(t).height(),o=s.data("refW"),d=s.data("refH"),l=i.fullscreen?a(t).width()/r:o/d,c=s.data("external-padding")?parseFloat(s.data("external-padding")):i.externalPadding,u=i.fullscreen||i.fullwidth?a(t).width()-c:n,h=i.fullscreen?r-c:i.carousel&&i.carouselVisible>1&&!i.carouselScaleHeight?d:i.fullwidth&&n/l>d?d-c:n/l-c,p=h>i.scaleMinHeight?!1:!0,f=p?u/i.scaleMinHeight:u/h,v=i.carouselScaleHeight&&1===i.carouselVisible?!0:!1,m=i.forceFit||e.is("[data-force-fit]");if(s.data("newSW",u),s.data("newSH",h),i.carousel?s.css({width:Math.round(u)+"px",height:s.data("first-load")&&v?s.find("li:first-child").find(".tms-content-scalable, img").outerHeight()+"px":!s.data("first-load")&&v?e.find(".tms-content-scalable, img").outerHeight():"auto"}):(s.css({width:Math.round(u)+"px",height:h>i.scaleMinHeight||"auto"===i.scaleMinHeight?Math.round(h)+"px":i.scaleMinHeight+"px"}),i.parallax&&s.parent().css({height:s.height()+"px"}),h=h>i.scaleMinHeight||"auto"===i.scaleMinHeight?h:i.scaleMinHeight,s.data("newSH",h)),!s.data("setup")||i.carousel&&i.carouselVisible>1)return!1;var g=e.is("[data-image]")?"image":"video",w=e.is("[data-video-bkg]")?!0:!1,y=e.is("[data-video-ratio]")?parseFloat(e.data("video-ratio")):1.778;e.find("img, iframe, video, .mejs-container").not(".tms-caption img, .tms-caption iframe, .tms-caption video").each(function(){var t,s,n;if("image"===g?(t=a(this).width(),s=a(this).height()):"video"===g&&((!i.respectRatio&&!w||i.fullscreen&&!w)&&e.addClass("tms-video-no-ratio"),w?(t=i.fullwidth?h*y:u,s=i.fullwidth?h:u/y):(t=a(this).attr("width")&&u>a(this).attr("width")?a(this).attr("width"):u,s=t/y)),n=t/s,"image"===g&&i.fullscreen||m||"video"===g&&w){if(a(this).is("img")&&!a(this).data("loaded"))return!1;a(this).css(f>n?{width:i.fullwidth&&!m?"auto":u+"px",height:Math.round(u/n)+"px",top:Math.round(-((u/n-h)/2))+"px",left:0}:{width:!i.fullwidth||m||w?Math.round(h*n)+"px":"auto",height:h+"px",top:0,left:Math.round(-((h*n-u)/2))+"px"})}else"video"===g&&a(this).css({width:Math.floor(t)+"px",height:Math.floor(s)+"px",top:Math.floor((h-s)/2)+"px",left:Math.floor((u-t)/2)+"px"})}),b(e,i)},b=function(e,t){var s=e.closest(".tm-slider-container"),n=s.data("newSW"),r=s.data("newSH"),o=s.data("refW"),d=s.data("refH");return!t.captionScaling||t.carouselVisible>1?!1:(e.find(".tms-caption").each(function(){if(!a(this).is("[data-no-scale]")){var e=a(this),i=e.data("x"),s=e.data("y"),l=e.data("w"),c=e.data("pt"),u=e.data("pr"),h=e.data("pb"),p=e.data("pl"),f=e.data("mt"),v=e.data("mr"),m=e.data("mb"),g=e.data("ml"),b=e.data("bt"),w=e.data("br"),y=e.data("bb"),x=e.data("bl"),S=e.data("fs"),F=0===e.data("lh")?S:e.data("lh"),T=e.is("[data-offsetx]")?parseFloat(e.data("offsetx")):0,O=e.is("[data-offsety]")?parseFloat(e.data("offsety")):0,z=0>n*(T/o)?n*(T/o):n*(T/o)>T?T:n*(T/o),C=0>r*(O/d)?n*(O/o):n*(O/o)>O?O:r*(O/d);t.fullwidth&&O>C&&0>C&&(C=O);var H;e.find("img, iframe, video").length&&(H=n*(l/o)>l?l:n*(l/o)>n?n:n*(l/o)),e.css(e.find("img").length||e.find("iframe, video").length?{width:H+"px",height:e.children("iframe, video").length?H/1.778+"px":"auto"}:{fontSize:n*(S/o)>S?S:n*(S/o)+"px",lineHeight:n*(F/o)>F?F+"px":n*(F/o)+"px",paddingTop:n*(c/o)>c?c:n*(c/o)+"px",paddingRight:n*(u/o)>u?u:n*(u/o)+"px",paddingBottom:n*(h/o)>h?h:n*(h/o)+"px",paddingLeft:n*(p/o)>p?p:n*(p/o)+"px",marginTop:n*(f/o)>f?f:n*(f/o)+"px",marginRight:n*(v/o)>v?v:n*(v/o)+"px",marginBottom:n*(m/o)>m?m:n*(m/o)+"px",marginLeft:n*(g/o)>g?g:n*(g/o)+"px",borderTopWidth:n*(b/o)>b?b:Math.ceil(n*(b/o))+"px",borderRightWidth:n*(w/o)>w?w:Math.ceil(n*(w/o))+"px",borderBottomWidth:n*(y/o)>y?y:Math.ceil(n*(y/o))+"px",borderLeftWidth:n*(x/o)>x?x:Math.ceil(n*(x/o))+"px",whiteSpace:"nowrap"}),e.css({top:"top"===s?0+C:"bottom"===s?r-e.outerHeight()-C:(r-e.outerHeight())/2+C+"px",left:"left"===i?0+z:"right"===i?n-e.outerWidth()-z:(n-e.outerWidth())/2+z+"px"})}}),i)},w=function(e,t){return t.carouselVisible>1?!1:(e.find(".tms-caption").not(".no-transition").each(function(){var e=a(this),t=e.data("o")?parseFloat(e.data("o")):0,i=e.data("tx")?parseFloat(e.data("tx")):0,s=e.data("ty")?parseFloat(e.data("ty")):0,n=e.data("tz")?parseFloat(e.data("tz")):0,r=e.data("rx")?parseFloat(e.data("rx")):0,o=e.data("ry")?parseFloat(e.data("ry")):0,d=e.data("rz")?parseFloat(e.data("rz")):0,l=e.data("s")?parseFloat(e.data("s")):1;e.css(A?{transition:"none",transform:"translate3d("+i+"px, "+s+"px, "+n+"px)rotate3d( 1, 0, 0, "+r+"deg)rotate3d( 0, 1, 0, "+o+"deg)rotate3d( 0, 0, 1, "+d+"deg)scale3d("+l+", "+l+", "+l+")",opacity:t}:{opacity:0})}),i)},y=function(e,t,s){if(!s.useVideoAPI||s.carouselVisible>1)return!1;var n;try{if(e.find("iframe").length){n="#"+e.find("iframe").attr("id");var r=a(n).attr("src");i!==r&&r.indexOf("vimeo")>-1?(n=$f(a(n)[0]),n.api("play"===t&&s.autoPlay?"play":"pause")):i!==r&&r.indexOf("youtu")>-1&&(n=n.replace("#",""),"play"===t&&s.autoPlay?x[n].playVideo():x[n].stopVideo())}else e.find("video").length&&(n="#"+e.find("video").attr("id"),"play"===t&&s.autoPlay?a(n)[0].play():a(n)[0].pause())}catch(o){}},x={},S=!1,F=!1,T=function(s,n){if(!n.useVideoAPI||n.carouselVisible>1)return!1;var r=s.attr("src"),o=new Date;if(s.attr("id","video-"+o.getTime()),i!==r&&r.indexOf("vimeo")>-1){if(s.attr("src",s.attr("src")+"&player_id="+s.attr("id")).addClass("vimeo"),!S){S=!0;var d=e.createElement("script");d.src="http://a.vimeocdn.com/js/froogaloop2.min.js";var l=e.getElementsByTagName("script")[0];l.parentNode.insertBefore(d,l)}s.on("load",function(){var e="#"+a(this).attr("id"),t=$f(a(e)[0]),i=a(this).closest("li").is(":first-child")?!0:!1;t.addEvent("ready",function(){i&&n.autoPlay&&t.api("play"),t.addEvent("finish",function(){n.replayOnEnd&&t.api("play")})})})}else if(i!==r&&r.indexOf("youtu")>-1){if(s.addClass("youtube"),!F){F=!0;var c=e.createElement("script");c.src="http://www.youtube.com/player_api";var u=e.getElementsByTagName("script")[0];u.parentNode.insertBefore(c,u)}var h=function(){a(".youtube").each(function(){var e=a(this).attr("id"),t=a(this).closest("li").is(":first-child")?!0:!1;x[e]=new YT.Player(e,{events:{onStateChange:function(a){a.data===YT.PlayerState.ENDED&&n.replayOnEnd&&x[e].playVideo()},onReady:function(){t&&n.autoPlay&&x[e].playVideo()}}})})};t.onYouTubePlayerAPIReady=function(){h()}}else if(s.is("video")){var p=e.getElementById(s.attr("id")),f=s.closest("li").is(":first-child")?!0:!1;f&&n.autoPlay&&(p.load(),p.autoplay=!0),s.parent().is("[data-video-bkg]")&&(p.muted=n.muteBkgVideo),n.replayOnEnd&&(p.loop=!0)}},O=function(){var a={};return function(e,t,i){i||(i="id"),a[i]&&clearTimeout(a[i]),a[i]=setTimeout(e,t)}}();t.isRetinaDevice=function(){var a="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return this.devicePixelRatio>1||this.matchMedia&&this.matchMedia(a).matches?!0:!1};var z,C=e.body||e.documentElement,H=C.style,A=H.transition!==i||H.WebkitTransition!==i||H.MozTransition!==i||H.MsTransition!==i||H.OTransition!==i,k=["WebkitTransform","MozTransform","OTransform","msTransform"];for(var P in k)H[k[P]]!==i&&(z="-"+k[P].replace("Transform","").toLowerCase());var V=z+"-transform",I="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",M={linear:"cubic-bezier(0, 0, 1, 1)",swing:"cubic-bezier(0.42, 0, 0.58, 1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)",easeFastSlow:"cubic-bezier(.11,.69,.66,1.01)",easeBounceBack:"cubic-bezier(.18,1.92,.59,1.33)",easeBounceBackHard:"cubic-bezier(.8,1.91,0,.94)",easeHickUp:"cubic-bezier(.28,1.78,.01,0)"},E=!1;(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))&&(E=!0),function(){for(var a=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!t.requestAnimationFrame;++i)t.requestAnimationFrame=t[e[i]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[e[i]+"CancelAnimationFrame"]||t[e[i]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(e){var i=(new Date).getTime(),s=Math.max(0,16-(i-a)),n=t.setTimeout(function(){e(i+s)},s);return a=i+s,n}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(a){clearTimeout(a)})}(),a.fn.avalancheSlider=function(e){return this.each(function(){var t=a(this);if(!t.data("avalancheSlider")){var i=new o(this,e);t.data("avalancheSlider",i)}})},a.fn.avalancheSlider.tmsOpts={animation:"slide",parallax:!1,easing:"easeInOutQuint",easingFallback:"easeInOutQuint",speed:700,parallaxSpeed:.2,parallaxScaleOut:!1,parallaxFadeOut:!1,navArrows:!0,navPagination:!0,navShowOnHover:!0,paginationType:"bullets",navKeyboard:!0,forceFit:!1,fullwidth:!1,fullscreen:!1,fsUseHeightOf:"",externalPadding:0,scaleUnder:1140,scaleMinHeight:214,captionScaling:!0,carousel:!1,carouselVisible:1,carouselScaleHeight:!1,autoAdvance:!0,showProgressBar:!0,interval:6e3,pauseOnHover:!0,useVideoAPI:!0,autoPlay:!0,replayOnEnd:!0,respectRatio:!0,muteBkgVideo:!1,lazyLoad:!0,retinaSupport:!0,retinaSupportMobile:!1,retinaSuffix:"@2x",onSetup:null,onLoadEnd:null,onSlideBefore:null,onSlideAfter:null,onSlideshowStart:null,onSlideshowPause:null,onSlideshowEnd:null}}(jQuery,document,window);